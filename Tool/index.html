<!DOCTYPE html>
<html>
<head>
	<title>Pixeln</title>
	<meta charset="UTF-8" />
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/jquery-ui.min.css">
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery-ui.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Dancing+Script' rel='stylesheet' type='text/css'>
	<link rel="shortcut icon" href="img/favicon.ico" />
</head>

<body>
	
	<div id="wrapper">
		
		<header>
			<div id="head_wrap">
				<h1 class="farbe"> Pixeln</h1>

				<!-- <div class="deko"></div> -->
			</div>
		</header>

		<main>
		<div id="left_wrap">
		    <div id="">
		      <label for="breite">Breite: </label>
					<input type="number" value="9" name="breite" max-length="3" id="breite" required>
		      <label for="hoehe">Höhe: </label>
					<input type="number" value="14" name="hoehe" max-length="3" id="hoehe" required>
		      <button id="erzeugen_matrix">Erzeugen Matrix</button>
		    </div>
				<div id="">
					<label for="output">Output: </label>
					<input type="text" name="output" max-length="50" id="output">
				</div>
		</div>
        <div id="pixeln_wrap">
        </div>
        <div id="right_wrap">
        </div>
		</main>

		<footer>

		</footer>

	</div>

</body>

<script type"text/javascript">
	//global Variable
	var debug = false;

	$(document).ready(function(){
	//will create Matrix on start
	createMatrix();
	
	$('#erzeugen_matrix').click(createMatrix);
	
	// Function to change color of each DIV      
	$(document).on('click', '.led', function(){
		//save bg-color 
		var color = $(this).css("background-color");
		
		//if color white, set black, else white
		if(color == 'rgb(255, 255, 255)'){
			$(this).css('background-color','rgb(0, 0, 0)');
		}else {
			$(this).css('background-color','rgb(255, 255, 255)');
		};
		
		createCode();
	}); // end click createMatrix
	
	}); //end $(document).ready function
		
	function createMatrix(breite, hoehe) {
		var breite = $('#breite').val();
		var hoehe  = $('#hoehe').val();
		
		var wrapperBreite = breite * 39; // 39 = div breite + border + margin
		$('#pixeln_wrap').css( 'width', wrapperBreite+'px'); 
		$('#pixeln_wrap').find('.led').remove();
		for(var h = 0; h < hoehe; h ++){
			for(var b = 0; b < breite; b ++){
				// erstellt die einzelnen divs mit id=breite-hoehe
				$('#pixeln_wrap').append('<div id='+h+'-'+b+' class="led"></div>');
			}; // End 'for loop breite'
		}; // end 'for loop hoehe'
		
		createCode();
		} // End createMatrix
		
		function createCode() {
			//noch fehleranfällig!!!!!
			var breite = $('#breite').val();
			var hoehe = $('#hoehe').val();
			var ausgabe = '{';
			
			for(var b = 0; b < breite; b ++){
				// inital/reset binary
				var binary = '';
				
				for(var h = 0; h < hoehe; h ++){
					// create ID
					var id  = '#'+ h + '-' + b;
					var color = $(id).css('background-color');
					
					if(color == 'rgb(255, 255, 255)'){
						binary = binary + '0';
					}else{
						binary = binary + '1';
					};
				}; // end 'for loop hoehe'
				
				//convert binary to decimal
				if(debug){console.log(binary)};
				
				binaryNumber = parseInt(binary,2);
   			var decimalNumber = binaryNumber.toString(10);
				ausgabe = ausgabe + decimalNumber + ', ';
			}; // end 'for loop hoehe'
				
			if(debug){console.log(ausgabe)};

			ausgabe = ausgabe.substr(0, ausgabe.length -2) + '}';
			$('#output').val(ausgabe);
			
		} // End createCode()
</script>

</html>
